---
layout: none
permalink: /itinerary.html
---

<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>您的行程单</title>
  <link rel="stylesheet" href="/assets/css/itinerary.css">
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body class="itinerary-page">

<div id="password-screen">
  <div class="pw-box card">
    <h2>请输入访问密码</h2>
    <input type="password" id="pw-input" placeholder="Password">
    <button onclick="checkPassword()">进入行程</button>
    <p id="pw-error" class="error"></p>
  </div>
</div>

<div id="content-wrap" style="display:none">
  <div class="container">

    <!-- 标题 -->
    <h1 class="main-title">{{ itinerary.basic.title }}</h1>
    <p class="sub-title">客户：{{ itinerary.basic.client_name }}（{{ itinerary.basic.travelers }}人）</p>
    <p class="sub-title">行程日期：{{ itinerary.basic.start_date }} 至 {{ itinerary.basic.end_date }}</p>

    <!-- 参团与离团信息 -->
    {% if itinerary.options.show_join_leave %}
    <div class="card mb-4">
      <h2>参团与离团信息</h2>

      <h3>上团信息</h3>
      <p><strong>上团地点：</strong>{{ itinerary.join_info.join_city }}</p>
      <p><strong>上团日期：</strong>{{ itinerary.join_info.join_date }}；{{ itinerary.join_info.join_note }}</p>
      <p><strong>航班信息：</strong>{{ itinerary.join_info.join_flight }}</p>

      <h3>下团信息</h3>
      <p><strong>下团地点：</strong>{{ itinerary.leave_info.leave_city }}</p>
      <p><strong>下团日期：</strong>{{ itinerary.leave_info.leave_date }}；{{ itinerary.leave_info.leave_note }}</p>
      <p><strong>航班信息：</strong>{{ itinerary.leave_info.leave_flight }}</p>

      <p class="important-note">{{ itinerary.important_note }}</p>
    </div>
    {% endif %}

    <!-- 每日行程 -->
    {% if itinerary.options.show_daily %}
    <div class="card mb-4">
      <h2>每日行程安排</h2>

      {% for d in itinerary.daily_itinerary %}
      <div class="day-block">
        <h3>第{{ d.day }}天 ｜ {{ d.date }} ｜ {{ d.weekday }}</h3>
        <h4>{{ d.title }}</h4>
        <p>{{ d.content | newline_to_br }}</p>

        {% if d.hotel %}
        <p><strong>夜宿：</strong>{{ d.hotel.name }}</p>
        <p><strong>地址：</strong>{{ d.hotel.address }}</p>
        {% endif %}
      </div>
      <hr>
      {% endfor %}
    </div>
    {% endif %}

    <!-- 费用板块 -->
    {% if itinerary.options.show_expense %}
    <div class="card mb-4">
      <h2>费用信息</h2>
      <h3>已含费用</h3>
      <ul>
        {% for i in itinerary.expense.included %}
        <li>{{ i }}</li>
        {% endfor %}
      </ul>

      <h3>不含费用</h3>
      <ul>
        {% for i in itinerary.expense.excluded %}
        <li>{{ i }}</li>
        {% endfor %}
      </ul>
    </div>
    {% endif %}

  </div>
</div>

<script>
  const urlParams = new URLSearchParams(window.location.search);
  const clientID = urlParams.get('client');

  if (!clientID) window.location.href = "/"; 

  const itineraryData = {{ site.data.itineraries | jsonify }};
  const itinerary = itineraryData[clientID];

  if (!itinerary) window.location.href = "/";

  function checkPassword() {
    const input = document.getElementById("pw-input").value;
    if (input === itinerary.password) {
      document.getElementById("password-screen").style.display = "none";
      document.getElementById("content-wrap").style.display = "block";
    } else {
      document.getElementById("pw-error").textContent = "密码错误";
    }
  }
</script>

</body>
</html>
